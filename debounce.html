<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        input{
            width: 355px;
            height: 30px;
            border: none;
            border-bottom: groove red;
            margin-right: 140px;
            outline: none;
            background-color: rgb(53, 35, 35);
            color: white;
        }
        #movies{
            height: 600px;
            width: 460px;
            border: 1px solid;
            overflow: scroll;
            border-top:none;
            text-align: center;
            margin-left: 60%;
        }
        #inputandbox{
            text-align: end;
        }
        #container{
            background-color: rgb(27, 26, 26);
            height: 1200px;
        }
        .head{
            width: 260px;
            font-size: 60px;
            color: rgb(84, 31, 8);
            margin: auto;
            background-color: yellow;
            border-radius: 40%;
        }
        p{
            color: violet;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="head">Chill~Flix</div>
        <div id="inputandbox">
    <input type="text" oninput="debounce(main,1000)" id="input" placeholder="Movie">
    <!-- <div id="movies"></div> -->
</div>
<div id="showselectedmovie"></div>
</div>
</body>
</html>
<script>
    var input=document.getElementById("input")
        input.onclick=function(){
            input.style.width="400px";
            
        }
    var time_id;
    var movies_div=document.createElement("div");
        movies_div.setAttribute("id","movies")
    // fetching the data
    async function findmoviedata(movie_name){
try{
    let res=  await fetch (`http://www.omdbapi.com/?apikey=c177405a&s=${movie_name}`)
        let data= await res.json();
       
        return data;
}catch(error){
    console.log(erorr)
}
       
    }
    // appending elements
    function appendMovies(movies){
        let show_movie=document.getElementById("inputandbox");
     
        movies_div.innerHTML=null;
        if(movies===undefined){
            return false
        }
        movies.forEach(function(movie){
            
            var div=document.createElement('div');
            div.style.width="100%";
            div.style.height="150px";
            div.style.marginTop="5px"
            div.style.backgroundColor="rgb(84, 31, 8)";
            div.style.display="flex"
            var img=document.createElement('img');
            img.src=movie.Poster;
           img.style.width="40%";
           img.style.height="90%";
           img.style.padding="10px"
            let p=document.createElement("p")
            p.innerText=movie.Title;
            div.append(img,p)
            div.onclick=function(){
                alert(movie.Title);
                movies_div.style.display="none";
                var show_img=document.createElement("img");
                img.src=movie.Poster;
                img.style.width="300px"
                var show_div=document.createElement("div");
                var title=document.createElement("p")
                title.innerText=" Title : " +movie.Title;
                var year=document.createElement("p");
                year.innerText=" Released in : "+movie.Year;
                var showselectedmovie=document.getElementById("showselectedmovie");
                showselectedmovie.append(img,title,year)
            }
            movies_div.append(div);
            show_movie.append(movies_div)
        })
    }
    // passing the data
    async function main(){
        var input=document.getElementById("input")
        input.onclick=function(){
            input.style.width="400px"
        }
        var name=input.value;
        if(name.length<3){
            return false
        }
        let res=await findmoviedata(name);
        appendMovies(res.Search)
        console.log(res.Search)
    }
    // debouncing the data
    function debounce(func,t){
        if(time_id){
            clearInterval(time_id)
        }
        time_id=setTimeout(function(){
            func()
        },t)
    }
</script>